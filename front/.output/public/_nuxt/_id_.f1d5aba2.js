import{m as U,c as R,f as N,a as y,V as B,b as o,d as k,e as d}from"./VTextField.bc9a3b5c.js";import{m as P,u as S,l as b,V as D}from"./index.ab6ac458.js";import{L as E,M as O,r as T,z as a,_ as z,N as I,O as V,A as s,t as c,v as g,P as m,Q as f,B as C}from"./entry.92a5a75a.js";const M=E({...P(),...U()},"VForm"),j=O()({name:"VForm",props:M(),emits:{"update:modelValue":i=>!0,submit:i=>!0},setup(i,e){let{slots:u,emit:v}=e;const t=R(i),h=T();function r(p){p.preventDefault(),t.reset()}function l(p){const _=p,n=t.validate();_.then=n.then.bind(n),_.catch=n.catch.bind(n),_.finally=n.finally.bind(n),v("submit",_),_.defaultPrevented||n.then(w=>{var x;let{valid:F}=w;F&&((x=h.value)==null||x.submit())}),_.preventDefault()}return S(()=>{var p;return a("form",{ref:h,class:["v-form",i.class],style:i.style,novalidate:!0,onReset:r,onSubmit:l},[(p=u.default)==null?void 0:p.call(u,t)])}),N(t,h)}}),A={layout:"default",name:"editCertificates",data(){return{certificate:{id:null,domain:null,ssls_url:null,activation_ssl:null,expiration_ssl:null,activation_weekday:null,expiration_weekday:null,issuer:null,status_ssl:null}}},mounted(){var i,e;(e=(i=this.$route)==null?void 0:i.params)!=null&&e.id&&this.$route.params.id!=="false"&&this.getCertificate(this.$route.params.id)},methods:{async persistir(){try{let i={domain:this.certificate.domain,ssls_url:this.certificate.ssls_url};if(this.certificate.id)return i.id=this.certificate.id,await y.put(`http://localhost:8000/certificates/${i.id}/`,i),b("Registro atualizado com sucesso",{autoClose:1e3,position:"bottom-right",theme:"dark"}),this.$router.push("/ssl");{let e=await y.post("http://localhost:8000/certificates/",i);e=e.data.domain,b("Registro criado com sucesso",{autoClose:1e3,position:"bottom-right",theme:"dark"}),this.$router.push("/ssl")}}catch{b("Ocorreu um erro no cadastro, contate o administrador",{autoClose:1e3,position:"bottom-right",theme:"dark"})}},formatDate(i){if(i=new Date(i),isNaN(new Date(i).getTime()))return"";let e=i.getDate(),u=i.getMonth()+1,v=i.getFullYear();return`${e<10?"0":""}${e}/${u<10?"0":""}${u}/${v}`},async getCertificate(i){try{let e=await y.get(`http://localhost:8000/certificates/${i}/`);e.data.activation_ssl=this.formatDate(e.data.activation_ssl),e.data.expiration_ssl=this.formatDate(e.data.expiration_ssl),e.data.expiration_ssl=this.formatDate(e.data.expiration_ssl),this.certificate=e.data}catch{b("Ocorreu um erro ao editar o registro, contate o administrador",{autoClose:1e3,position:"bottom-right",theme:"dark"})}}}},L={key:0,class:"text-center pb-5"},Q={key:1,class:"text-center pb-5"};function Y(i,e,u,v,t,h){const r=I("value");return c(),V(B,null,{default:s(()=>[a(k,{"no-gutters":"",class:"py-10 justify-center"},{default:s(()=>[a(o,{cols:"6"},{default:s(()=>[t.certificate.id?m("",!0):(c(),g("h1",L,"Cadastro de certificados")),t.certificate.id?(c(),g("h1",Q,"Edição de certificados")):m("",!0)]),_:1}),a(o,{cols:"8"},{default:s(()=>[a(j,{modelValue:i.valid,"onUpdate:modelValue":e[7]||(e[7]=l=>i.valid=l)},{default:s(()=>[a(k,{"no-gutters":""},{default:s(()=>[t.certificate.id?(c(),V(o,{key:0,cols:"12"},{default:s(()=>[f(a(d,{modelValue:t.certificate.id,"onUpdate:modelValue":e[0]||(e[0]=l=>t.certificate.id=l),disabled:"",placeholder:"ID",label:"ID"},null,8,["modelValue"]),[[r,t.certificate.id]])]),_:1})):m("",!0),a(o,{cols:"12"},{default:s(()=>[f(a(d,{modelValue:t.certificate.domain,"onUpdate:modelValue":e[1]||(e[1]=l=>t.certificate.domain=l),placeholder:"Domínio",label:"Domínio"},null,8,["modelValue"]),[[r,t.certificate.domain]])]),_:1}),a(o,{cols:"12"},{default:s(()=>[f(a(d,{modelValue:t.certificate.ssls_url,"onUpdate:modelValue":e[2]||(e[2]=l=>t.certificate.ssls_url=l),placeholder:"Url ssls",label:"Url ssls"},null,8,["modelValue"]),[[r,t.certificate.ssls_url]])]),_:1}),t.certificate.activation_ssl?(c(),V(o,{key:1,cols:"12"},{default:s(()=>[f(a(d,{modelValue:t.certificate.activation_ssl,"onUpdate:modelValue":e[3]||(e[3]=l=>t.certificate.activation_ssl=l),disabled:"",placeholder:"Data da ativação",label:"Data da ativação"},null,8,["modelValue"]),[[r,t.certificate.activation_ssl]])]),_:1})):m("",!0),t.certificate.expiration_ssl?(c(),V(o,{key:2,cols:"12"},{default:s(()=>[f(a(d,{modelValue:t.certificate.expiration_ssl,"onUpdate:modelValue":e[4]||(e[4]=l=>t.certificate.expiration_ssl=l),disabled:"",placeholder:"Data expiração",label:"Data expiração"},null,8,["modelValue"]),[[r,t.certificate.expiration_ssl]])]),_:1})):m("",!0),t.certificate.issuer?(c(),V(o,{key:3,cols:"12"},{default:s(()=>[f(a(d,{modelValue:t.certificate.issuer,"onUpdate:modelValue":e[5]||(e[5]=l=>t.certificate.issuer=l),disabled:"",placeholder:"Emissora",label:"Emissora"},null,8,["modelValue"]),[[r,t.certificate.issuer]])]),_:1})):m("",!0),t.certificate.status_ssl?(c(),V(o,{key:4,cols:"12"},{default:s(()=>[f(a(d,{modelValue:t.certificate.status_ssl,"onUpdate:modelValue":e[6]||(e[6]=l=>t.certificate.status_ssl=l),disabled:"",placeholder:"Status",label:"Status"},null,8,["modelValue"]),[[r,t.certificate.status_ssl]])]),_:1})):m("",!0)]),_:1}),a(k,null,{default:s(()=>[a(o,null,{default:s(()=>[a(D,{class:"mr-2",color:"error",outlined:"",to:"/ssl"},{default:s(()=>[C(" Cancelar ")]),_:1}),a(D,{color:"success",outlined:"",onClick:h.persistir},{default:s(()=>[C(" Salvar ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}const J=z(A,[["render",Y]]);export{J as default};
